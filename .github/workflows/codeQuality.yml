name: Code Quality

on:
    push:
        branches-ignore: 
            - 'ga-ignore-**'

jobs:
    commit-check:
        name: Commit Check
        runs-on: [Linux, self-hosted]
  
        steps:
          - uses: actions/checkout@v4
          - uses: wagoid/commitlint-github-action@v5

    Lint:
        runs-on: [Linux, self-hosted]
        steps:
        - uses: actions/checkout@v4
        - uses: DoozyX/clang-format-lint-action@v0.16.2
          with:
            clangFormatVersion: 16
            inplace: True
        - uses: EndBug/add-and-commit@v9
          with:
            author_name: Clang Robot
            author_email: robot@example.com
            message: 'clean(clang-format): run clang-format on all files'
          env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}